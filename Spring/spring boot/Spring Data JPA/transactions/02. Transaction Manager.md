## Hierarchy of interfaces
1. TransactionManager(interface)
2. PlatformTransactionManager(interface) extends TransactionManager
	1. has three methods
		1. getTransaction
		2. commit
		3. rollback
3. AbstractPlatformTransactionManager(Abstract class provides implmentation of PlatformTransactionManager) 
4. JPA JDBC Hibernate now have different subclasses extending the base abstract class
## Declarative approach
@Transactional annotation
## Programmatic approach
#### 1. Using PlatformTransactionManager Bean
[gather.town/ws/src/main/java/com/sharmachait/ws/config/WebsocketConfig.java at main Â· sharmachait/gather.town](https://github.com/sharmachait/gather.town/blob/main/ws/src/main/java/com/sharmachait/ws/config/WebsocketConfig.java)
```java
@Configuration
public class AppConfig {
	@Bean
	public DataSource dataSource(){
		DriverManagerDataSource ds = new DriverManagerDataSource();
	    ds.setDriverClassName("org.postgresql.Driver");
	    ds.setUrl("jdbc:postgresql://ep-soft-recipe-a189x52v.ap-southeast-1.aws.neon.tech/chat?sslmode=require");
	    ds.setUsername("learning_postgres_owner");
	    ds.setPassword("t8qELP1OjCFp");
	    return ds;
	}
	@Bean
	public PlatformTransactionManager transactionManager(DataSource ds){
		return new DataSourceTransactionManager(ds);
	}
}

@Component
public class RepositoryClass {
	private PlatformTransactionManager txnMng;
	public RepositoryClass(PlatformTransactionManager txnMng){
		this.txnMng = txnMng;
	}
	public void transactionExample(){
		TransactionStatus status = txnMng.getTransaction(null);
		try{
			sout("query");
			txnMng.commit(status);
		}catch (Exception e){
			txnMng.rollback(status);
		}
	}
}
```

with the current template we can use JdbcTemplates

if we inject JpaTransactionManager then we can use JPA repositories

#### 2. Using TransactionTemplate

```java
@Configuration
public class AppConfig {
	
	@Bean
	public DataSource dataSource(){
		DriverManagerDataSource ds = new DriverManagerDataSource();
	    ds.setDriverClassName("org.postgresql.Driver");
	    ds.setUrl("jdbc:postgresql://ep-soft-recipe-a189x52v.ap-southeast-1.aws.neon.tech/chat?sslmode=require");
	    ds.setUsername("learning_postgres_owner");
	    ds.setPassword("t8qELP1OjCFp");
	    return ds;
	}
	
	@Bean
	public PlatformTransactionManager transactionManager(DataSource ds){
		return new DataSourceTransactionManager(ds);
	}
	
	@Bean
	public TransactionTemplate trancationTemplate(PlatformTransactionManager txnMng){
		return new TransactionTemplate(txnMng);
	}
}

@Component
public class RepositoryClass {
	
	private TransactionTemplate txnTemplate; 
	
	public RepositoryClass(TransactionTemplate txnTemplate){
		this.txnTemplate = txnTemplate;
	}
	
	public void transactionExample(){
		TransactionCallback<TransactionStatus> operations = (TransactionStatus status) -> {
			//do queries
			return status
		};
		
		TransactionStatus status = txnTemplate.execute(operations);
	}
}
```

use JpaTransactionManager to work with JpaRepositories