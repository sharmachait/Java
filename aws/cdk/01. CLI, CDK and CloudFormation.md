To configure a IAM user to be able to access aws using the aws cli
```sh
aws configure
```
and provide an access key for the IAM user 
IAM user access keys have two parts, the non secret and the secret part
the secret part is only visible once

Cloud formation works by organizing different aws related services/resources into stacks

CDK code is transformed into CloudFormation templates

we cant delete stacks from the UI if the underlying resource is being used, as in if the underlying s3 bucket has data in it, then we wont be able to delete the stack

## CDK
> cdk init

![[Pasted image 20250921184934.png]]

these are all the available options
since we want to work with typescript
> cdk init --language=typescript

this generates the project for us with a bin that is the entrypoint and a lib where we can export our stacks from
some tests
and cdk.json

the cdk.json is the most important file
it has the run script for our project as well    

https://docs.aws.amazon.com/cdk/api/v2/docs/aws-construct-library.html

https://github.com/aws/aws-cdk

```ts
import * as cdk from 'aws-cdk-lib';
import { CdkStarterStack } from '../lib/cdk-starter-stack';
const app = new cdk.App();
new CdkStarterStack(app, 'CdkStarterStack');
```

this is a simple app with a single stack
and an empty cloudformation stack
```ts
export class CdkStarterStack extends cdk.Stack {
  constructor(scope: Construct, id: string, props?: cdk.StackProps) {
    super(scope, id, props);
  }
}
```

to deploy this empty stack to aws
```sh
cdk bootstrap
```
this will create the required iam users and roles for the cdk and also the s3 bucket to store the state of the resources under this stack like terraform state
after this we can 
```sh
cdk deploy
```
an empty cdk app deployment will only create the metadata in the resources
after the bootstrap command cdk generate cloudformation templates for us in a cdk.out fodler
![[Pasted image 20250922012909.png]]
instead of deploying if we want to check if our code is valid and generates a valid cloudformation template we can use the command
```sh
cdk synth
```
this only generates the cloud formation templates and validates them
the bootstrap command also generates the templates for us but it also initializes aws resources like the s3 bucket for us

## constructs
we have three levels of cdk constructs
1. low level constructs - cloud formation resource, when used we must configure all properties
2. aws resources - CDK provides additional functionality like defaults, boiler plates and type safety
3. patterns - combines multiple types of resources and helps with common tasks in aws, example would be LambdaRestApi which combines lambda and api-gateway endpoint
constructs are just abstractions

## CDK commands
```sh
cdk init app --language typescript
cdk bootstrap
cdl synth
cdk deploy
cdk list
# lists all stacks, instances of CdkStarterStack
cdk diff
# checks and tells you difference between our local setup and what we have deployed on the cloud, like tf plan
cdk destroy StackName
# deletes the stack, its exactly the same as deleting from the UI 
```